/*
 * utility.c
 *
 *  Created on: Sep 1, 2023
 *      Author: tjp
 */

// Polling for a character to be received
int echo_u1(uint8_t escape_char){
	uint8_t karcsi=' ';
	int counter=0;
	while(!(karcsi==escape_char)){
	        if (HAL_UART_Receive(&huart1, (uint8_t *)&karcsi, 1, SHORT_TIMEOUT) == HAL_OK) {
	            // Echo the received character back
	            HAL_UART_Transmit(&huart1, (uint8_t *)&karcsi, 1, HAL_MAX_DELAY);
	            TOGGLE(BLUE);
	            counter++;
	        }
	}
	return counter;
}

void test_leds(){
	ON(RED);
	HAL_Delay(100);
	ON(GREEN);
	HAL_Delay(100);
	ON(BLUE1);
	HAL_Delay(100);
	ON(BLUE2);
	HAL_Delay(100);
	ON(BLUE3);
	HAL_Delay(100);
	OFF(GREEN);
	HAL_Delay(100);
	ON(GREEN);
	HAL_Delay(100);
	ON(BLUE1);
	HAL_Delay(100);
	ON(BLUE2);
	HAL_Delay(100);
	ON(BLUE3);
	HAL_Delay(100);

}

